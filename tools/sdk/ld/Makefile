
CPP = ../../../tools/xtensa-lx106-elf/bin/xtensa-lx106-elf-cpp
COMMON = eagle.app.v6.common.ld
WARN = "\/\* warning: AUTOGENERATED from $(COMMON)\*.h \*\/"

all:
	@echo "available rules:"
	@echo "  flash: move c++ vtables to flash (= default in git master repository)"
	@echo "  iram: move c++ vtables to iram"
	@echo "  heap: move c++ vtables to heap"

heap:
	@(echo "$(WARN)"; $(CPP) -CC -E -DVTABLES_IN_DRAM $(COMMON).h | grep -v '^#') > $(COMMON)
	@echo "c++ vtables moved to heap"

iram:
	@(echo "$(WARN)"; $(CPP) -CC -E -DVTABLES_IN_IRAM $(COMMON).h | grep -v '^#') > $(COMMON)
	@echo "c++ vtables moved to iram"

flash:
	@(echo "$(WARN)"; $(CPP) -CC -E -DVTABLES_IN_FLASH $(COMMON).h | grep -v '^#') > $(COMMON)
	@echo "c++ vtables moved to flash"
